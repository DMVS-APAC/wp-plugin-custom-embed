!function(){"use strict";var e={300:function(e,t){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=window.wp.element,t=window.React;function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,r(e,t,"set"),n),n}var s=window.wp.i18n,i=window.wp.data,o=window.wp.components;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var c=e=>"checkbox"===e.type,u=e=>e instanceof Date,d=e=>null==e;const f=e=>"object"==typeof e;var m=e=>!d(e)&&!Array.isArray(e)&&f(e)&&!u(e),h=e=>Array.isArray(e)?e.filter(Boolean):[],y=e=>void 0===e,p=(e,t,n)=>{if(!t||!m(e))return n;const r=h(t.split(/[,[\].]+?/)).reduce(((e,t)=>d(e)?e:e[t]),e);return y(r)||r===e?y(e[t])?n:e[t]:r};const v="onChange",g="onSubmit",b="all",_="pattern",w="required";t.createContext(null);var E=e=>m(e)&&!Object.keys(e).length,k=e=>Array.isArray(e)?e:[e];var x=e=>"string"==typeof e,S="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function D(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(S&&(e instanceof Blob||e instanceof FileList)||!n&&!m(e))return e;if(t=n?[]:{},Array.isArray(e)||(e=>{const t=e.constructor&&e.constructor.prototype;return m(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)t[n]=D(e[n]);else t=e}return t}var V=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},A=e=>/^\w*$/.test(e),F=e=>h(e.replace(/["|']|\]/g,"").split(/\.|\[/));function C(e,t,n){let r=-1;const a=A(t)?[t]:F(t),s=a.length,i=s-1;for(;++r<s;){const t=a[r];let s=n;if(r!==i){const n=e[t];s=m(n)||Array.isArray(n)?n:isNaN(+a[r+1])?{}:[]}e[t]=s,e=e[t]}return e}const N=(e,t,n)=>{for(const r of n||Object.keys(e)){const n=p(e,r);if(n){const{_f:e,...r}=n;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else m(r)&&N(r,t)}}};var T=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),O=(e,t,n)=>{const r=h(p(e,n));return C(r,"root",t[n]),C(e,n,r),e},M=e=>"boolean"==typeof e,P=e=>"file"===e.type,I=e=>"function"==typeof e,j=e=>x(e)||t.isValidElement(e),B=e=>"radio"===e.type,L=e=>e instanceof RegExp;const U={value:!1,isValid:!1},q={value:!0,isValid:!0};var R=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!y(e[0].attributes.value)?y(e[0].value)||""===e[0].value?q:{value:e[0].value,isValid:!0}:q:U}return U};const G={isValid:!1,value:null};var W=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),G):G;function $(e,t,n="validate"){if(j(e)||Array.isArray(e)&&e.every(j)||M(e)&&!e)return{type:n,message:j(e)?e:"",ref:t}}var H=e=>m(e)&&!L(e)?e:{value:e,message:""},z=async(e,t,n,r,a)=>{const{ref:s,refs:i,required:o,maxLength:l,minLength:u,min:f,max:h,pattern:y,validate:p,name:v,valueAsNumber:g,mount:b,disabled:k}=e._f;if(!b||k)return{};const S=i?i[0]:s,D=e=>{r&&S.reportValidity&&(S.setCustomValidity(M(e)?"":e||""),S.reportValidity())},A={},F=B(s),C=c(s),N=F||C,T=(g||P(s))&&!s.value||""===t||Array.isArray(t)&&!t.length,O=V.bind(null,v,n,A),U=(e,t,n,r="maxLength",a="minLength")=>{const i=e?t:n;A[v]={type:e?r:a,message:i,ref:s,...O(e?r:a,i)}};if(a?!Array.isArray(t)||!t.length:o&&(!N&&(T||d(t))||M(t)&&!t||C&&!R(i).isValid||F&&!W(i).isValid)){const{value:e,message:t}=j(o)?{value:!!o,message:o}:H(o);if(e&&(A[v]={type:w,message:t,ref:S,...O(w,t)},!n))return D(t),A}if(!(T||d(f)&&d(h))){let e,r;const a=H(h),i=H(f);if(d(t)||isNaN(t)){const n=s.valueAsDate||new Date(t),o=e=>new Date((new Date).toDateString()+" "+e),l="time"==s.type,c="week"==s.type;x(a.value)&&t&&(e=l?o(t)>o(a.value):c?t>a.value:n>new Date(a.value)),x(i.value)&&t&&(r=l?o(t)<o(i.value):c?t<i.value:n<new Date(i.value))}else{const n=s.valueAsNumber||(t?+t:t);d(a.value)||(e=n>a.value),d(i.value)||(r=n<i.value)}if((e||r)&&(U(!!e,a.message,i.message,"max","min"),!n))return D(A[v].message),A}if((l||u)&&!T&&(x(t)||a&&Array.isArray(t))){const e=H(l),r=H(u),a=!d(e.value)&&t.length>e.value,s=!d(r.value)&&t.length<r.value;if((a||s)&&(U(a,e.message,r.message),!n))return D(A[v].message),A}if(y&&!T&&x(t)){const{value:e,message:r}=H(y);if(L(e)&&!t.match(e)&&(A[v]={type:_,message:r,ref:s,...O(_,r)},!n))return D(r),A}if(p)if(I(p)){const e=$(await p(t),S);if(e&&(A[v]={...e,...O("validate",e.message)},!n))return D(e.message),A}else if(m(p)){let e={};for(const r in p){if(!E(e)&&!n)break;const a=$(await p[r](t),S,r);a&&(e={...a,...O(r,a.message)},D(a.message),n&&(A[v]=e))}if(!E(e)&&(A[v]={ref:S,...e},!n))return A}return D(!0),A},K=e=>({isOnSubmit:!e||e===g,isOnBlur:"onBlur"===e,isOnChange:e===v,isOnAll:e===b,isOnTouch:"onTouched"===e});function J(e){for(const t in e)if(!y(e[t]))return!1;return!0}function Q(e,t){const n=A(t)?[t]:F(t),r=1==n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=y(e)?r++:e[t[r++]];return e}(e,n),a=n[n.length-1];let s;r&&delete r[a];for(let t=0;t<n.slice(0,-1).length;t++){let r,a=-1;const i=n.slice(0,-(t+1)),o=i.length-1;for(t>0&&(s=e);++a<i.length;){const t=i[a];r=r?r[t]:e[t],o===a&&(m(r)&&E(r)||Array.isArray(r)&&J(r))&&(s?delete s[t]:delete e[t]),s=r}}return e}function X(){let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Y=e=>d(e)||!f(e);function Z(e,t){if(Y(e)||Y(t))return e===t;if(u(e)&&u(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const a of n){const n=e[a];if(!r.includes(a))return!1;if("ref"!==a){const e=t[a];if(u(n)&&u(e)||m(n)&&m(e)||Array.isArray(n)&&Array.isArray(e)?!Z(n,e):n!==e)return!1}}return!0}var ee=e=>{const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},te=e=>"select-multiple"===e.type,ne=e=>ee(e)&&e.isConnected,re=e=>{for(const t in e)if(I(e[t]))return!0;return!1};function ae(e,t={}){const n=Array.isArray(e);if(m(e)||n)for(const n in e)Array.isArray(e[n])||m(e[n])&&!re(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ae(e[n],t[n])):d(e[n])||(t[n]=!0);return t}function se(e,t,n){const r=Array.isArray(e);if(m(e)||r)for(const r in e)Array.isArray(e[r])||m(e[r])&&!re(e[r])?y(t)||Y(n[r])?n[r]=Array.isArray(e[r])?ae(e[r],[]):{...ae(e[r])}:se(e[r],d(t)?{}:t[r],n[r]):Z(e[r],t[r])?delete n[r]:n[r]=!0;return n}var ie=(e,t)=>se(e,t,ae(t)),oe=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>y(e)?e:t?""===e?NaN:e?+e:e:n&&x(e)?new Date(e):r?r(e):e;function le(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return P(t)?t.files:B(t)?W(e.refs).value:te(t)?[...t.selectedOptions].map((({value:e})=>e)):c(t)?R(e.refs).value:oe(y(t.value)?e.ref.value:t.value,e)}var ce=e=>y(e)?e:L(e)?e.source:m(e)?L(e.value)?e.value.source:e.value:e;function ue(e,t,n){const r=p(e,n);if(r||A(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const r=a.join("."),s=p(t,r),i=p(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(i&&i.type)return{name:r,error:i};a.pop()}return{name:n}}const de={mode:g,reValidateMode:v,shouldFocusError:!0};function fe(e={}){let t,n={...de,...e},r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},s=D(n.defaultValues)||{},i=n.shouldUnregister?{}:D(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},f=0,v={};const g={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={watch:X(),array:X(),state:X()},w=K(n.mode),V=K(n.reValidateMode),A=n.criteriaMode===b,F=async()=>{let e=!1;return g.isValid&&(e=n.resolver?E((await U()).errors):await q(a,!0),e!==r.isValid&&(r.isValid=e,_.state.next({isValid:e}))),e},j=(e,t,n,r)=>{const l=p(a,e);if(l){const a=p(i,e,y(n)?p(s,e):n);y(a)||r&&r.defaultChecked||t?C(i,e,t?a:le(l._f)):W(e,a),o.mount&&F()}},L=(e,t,n,a,i)=>{let o=!1,l=!1;const c={name:e};if(g.isDirty&&(l=r.isDirty,r.isDirty=c.isDirty=R(),o=l!==c.isDirty),g.dirtyFields&&(!n||a)){l=p(r.dirtyFields,e);const n=Z(p(s,e),t);n?Q(r.dirtyFields,e):C(r.dirtyFields,e,!0),c.dirtyFields=r.dirtyFields,o=o||l!==!n}if(n){const t=p(r.touchedFields,e);t||(C(r.touchedFields,e,n),c.touchedFields=r.touchedFields,o=o||g.touchedFields&&t!==n)}return o&&i&&_.state.next(c),o?c:{}},U=async e=>n.resolver?await n.resolver({...i},n.context,((e,t,n,r)=>{const a={};for(const n of e){const e=p(t,n);e&&C(a,n,e._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}})(e||l.mount,a,n.criteriaMode,n.shouldUseNativeValidation)):{},q=async(e,t,a={valid:!0})=>{for(const s in e){const o=e[s];if(o){const{_f:e,...s}=o;if(e){const s=l.array.has(e.name),c=await z(o,p(i,e.name),A,n.shouldUseNativeValidation,s);if(c[e.name]&&(a.valid=!1,t))break;!t&&(p(c,e.name)?s?O(r.errors,c,e.name):C(r.errors,e.name,c[e.name]):Q(r.errors,e.name))}s&&await q(s,t,a)}}return a.valid},R=(e,t)=>(e&&t&&C(i,e,t),!Z(ae(),s)),G=(e,t,n)=>((e,t,n,r)=>x(e)?(r&&t.watch.add(e),p(n,e)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),p(n,e)))):(t.watchAll=!!r,n))(e,l,{...o.mount?i:y(t)?s:x(e)?{[e]:t}:t},n),W=(e,t,n={})=>{const r=p(a,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&C(i,e,oe(t,n)),s=S&&ee(n.ref)&&d(t)?"":t,te(n.ref)?[...n.ref.options].forEach((e=>e.selected=s.includes(e.value))):n.refs?c(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):n.refs[0]&&(n.refs[0].checked=!!s):n.refs.forEach((e=>e.checked=e.value===s)):P(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||_.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&L(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&re(e)},$=(e,t,n)=>{for(const r in t){const s=t[r],i=`${e}.${r}`,o=p(a,i);!l.array.has(e)&&Y(s)&&(!o||o._f)||u(s)?W(i,s,n):$(i,s,n)}},H=(e,t,n={})=>{const o=p(a,e),c=l.array.has(e),u=D(t);C(i,e,u),c?(_.array.next({name:e,values:i}),(g.isDirty||g.dirtyFields)&&n.shouldDirty&&(r.dirtyFields=ie(s,i),_.state.next({name:e,dirtyFields:r.dirtyFields,isDirty:R(e,u)}))):!o||o._f||d(u)?W(e,u,n):$(e,u,n),T(e,l)&&_.state.next({}),_.watch.next({name:e})},J=async s=>{const o=s.target;let u=o.name;const d=p(a,u);if(d){let y,b;const k=o.type?le(d._f):(e=>m(e)&&e.target?c(e.target)?e.target.checked:e.target.value:e)(s),x="blur"===s.type||"focusout"===s.type,S=!((h=d._f).mount&&(h.required||h.min||h.max||h.maxLength||h.minLength||h.pattern||h.validate)||n.resolver||p(r.errors,u)||d._f.deps)||((e,t,n,r,a)=>!a.isOnAll&&(!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:!(n?r.isOnChange:a.isOnChange)||e))(x,p(r.touchedFields,u),r.isSubmitted,V,w),D=T(u,l,x);C(i,u,k),x?(d._f.onBlur&&d._f.onBlur(s),t&&t(0)):d._f.onChange&&d._f.onChange(s);const N=L(u,k,x,!1),O=!E(N)||D;if(!x&&_.watch.next({name:u,type:s.type}),S)return g.isValid&&F(),O&&_.state.next({name:u,...D?{}:N});if(!x&&D&&_.state.next({}),v[u]=v[u]?v[u]+1:1,_.state.next({isValidating:!0}),n.resolver){const{errors:e}=await U([u]),t=ue(r.errors,a,u),n=ue(e,a,t.name||u);y=n.error,u=n.name,b=E(e)}else y=(await z(d,p(i,u),A,n.shouldUseNativeValidation))[u],F();d._f.deps&&re(d._f.deps),((n,a,s,i)=>{const o=p(r.errors,n),l=g.isValid&&M(a)&&r.isValid!==a;var c;if(e.delayError&&s?(c=()=>((e,t)=>{C(r.errors,e,t),_.state.next({errors:r.errors})})(n,s),t=e=>{clearTimeout(f),f=window.setTimeout(c,e)},t(e.delayError)):(clearTimeout(f),t=null,s?C(r.errors,n,s):Q(r.errors,n)),(s?!Z(o,s):o)||!E(i)||l){const e={...i,...l&&M(a)?{isValid:a}:{},errors:r.errors,name:n};r={...r,...e},_.state.next(e)}v[n]--,g.isValidating&&!Object.values(v).some((e=>e))&&(_.state.next({isValidating:!1}),v={})})(u,b,y,N)}var h},re=async(e,t={})=>{let s,i;const o=k(e);if(_.state.next({isValidating:!0}),n.resolver){const t=await(async e=>{const{errors:t}=await U();if(e)for(const n of e){const e=p(t,n);e?C(r.errors,n,e):Q(r.errors,n)}else r.errors=t;return t})(y(e)?e:o);s=E(t),i=e?!o.some((e=>p(t,e))):s}else e?(i=(await Promise.all(o.map((async e=>{const t=p(a,e);return await q(t&&t._f?{[e]:t}:t)})))).every(Boolean),(i||r.isValid)&&F()):i=s=await q(a);return _.state.next({...!x(e)||g.isValid&&s!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:s}:{},errors:r.errors,isValidating:!1}),t.shouldFocus&&!i&&N(a,(e=>e&&p(r.errors,e)),e?o:l.mount),i},ae=e=>{const t={...s,...o.mount?i:{}};return y(e)?t:x(e)?p(t,e):e.map((e=>p(t,e)))},se=(e,t)=>({invalid:!!p((t||r).errors,e),isDirty:!!p((t||r).dirtyFields,e),isTouched:!!p((t||r).touchedFields,e),error:p((t||r).errors,e)}),fe=(e,t={})=>{for(const o of e?k(e):l.mount)l.mount.delete(o),l.array.delete(o),p(a,o)&&(t.keepValue||(Q(a,o),Q(i,o)),!t.keepError&&Q(r.errors,o),!t.keepDirty&&Q(r.dirtyFields,o),!t.keepTouched&&Q(r.touchedFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&Q(s,o));_.watch.next({}),_.state.next({...r,...t.keepDirty?{isDirty:R()}:{}}),!t.keepIsValid&&F()},me=(e,t={})=>{let r=p(a,e);const u=M(t.disabled);return C(a,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),r?u&&C(i,e,t.disabled?void 0:p(i,e,le(r._f))):j(e,!0,t.value),{...u?{disabled:t.disabled}:{},...n.shouldUseNativeValidation?{required:!!t.required,min:ce(t.min),max:ce(t.max),minLength:ce(t.minLength),maxLength:ce(t.maxLength),pattern:ce(t.pattern)}:{},name:e,onChange:J,onBlur:J,ref:i=>{if(i){me(e,t),r=p(a,e);const n=y(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>B(e)||c(e))(n),l=r._f.refs||[];if(o?l.find((e=>e===n)):n===r._f.ref)return;C(a,e,{_f:{...r._f,...o?{refs:[...l.filter(ne),n,...Array.isArray(p(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),j(e,!1,void 0,n)}else r=p(a,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!((e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)))(l.array,e)||!o.action)&&l.unMount.add(e)}}},he=()=>n.shouldFocusError&&N(a,(e=>e&&p(r.errors,e)),l.mount);return{control:{register:me,unregister:fe,getFieldState:se,_executeSchema:U,_focusError:he,_getWatch:G,_getDirty:R,_updateValid:F,_removeUnmounted:()=>{for(const e of l.unMount){const t=p(a,e);t&&(t._f.refs?t._f.refs.every((e=>!ne(e))):!ne(t._f.ref))&&fe(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],n,l,c=!0,u=!0)=>{if(l&&n){if(o.action=!0,u&&Array.isArray(p(a,e))){const t=n(p(a,e),l.argA,l.argB);c&&C(a,e,t)}if(u&&Array.isArray(p(r.errors,e))){const t=n(p(r.errors,e),l.argA,l.argB);c&&C(r.errors,e,t),((e,t)=>{!h(p(e,t)).length&&Q(e,t)})(r.errors,e)}if(g.touchedFields&&u&&Array.isArray(p(r.touchedFields,e))){const t=n(p(r.touchedFields,e),l.argA,l.argB);c&&C(r.touchedFields,e,t)}g.dirtyFields&&(r.dirtyFields=ie(s,i)),_.state.next({isDirty:R(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else C(i,e,t)},_getFieldArray:t=>h(p(o.mount?i:s,t,e.shouldUnregister?p(s,t,[]):[])),_subjects:_,_proxyFormState:g,get _fields(){return a},get _formValues(){return i},get _stateFlags(){return o},set _stateFlags(e){o=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:re,register:me,handleSubmit:(e,t)=>async s=>{s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let o=!0,l=D(i);_.state.next({isSubmitting:!0});try{if(n.resolver){const{errors:e,values:t}=await U();r.errors=e,l=t}else await q(a);E(r.errors)?(_.state.next({errors:{},isSubmitting:!0}),await e(l,s)):(t&&await t({...r.errors},s),he())}catch(e){throw o=!1,e}finally{r.isSubmitted=!0,_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:E(r.errors)&&o,submitCount:r.submitCount+1,errors:r.errors})}},watch:(e,t)=>I(e)?_.watch.subscribe({next:n=>e(G(void 0,t),n)}):G(e,t,!0),setValue:H,getValues:ae,reset:(t,n)=>((t,n={})=>{const c=t||s,u=D(c),d=t&&!E(t)?u:s;if(n.keepDefaultValues||(s=c),!n.keepValues){if(n.keepDirtyValues)for(const e of l.mount)p(r.dirtyFields,e)?C(d,e,p(i,e)):H(e,p(d,e));else{if(S&&y(t))for(const e of l.mount){const t=p(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(ee(e)){const t=e.closest("form");if(t){t.reset();break}}}}a={}}i=e.shouldUnregister?n.keepDefaultValues?D(s):{}:u,_.array.next({values:d}),_.watch.next({values:d})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!g.isValid||!!n.keepIsValid,o.watch=!!e.shouldUnregister,_.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!(!n.keepDefaultValues||Z(t,s)),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&t?ie(s,t):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})})(I(t)?t(i):t,n),resetField:(e,t={})=>{p(a,e)&&(y(t.defaultValue)?H(e,p(s,e)):(H(e,t.defaultValue),C(s,e,t.defaultValue)),t.keepTouched||Q(r.touchedFields,e),t.keepDirty||(Q(r.dirtyFields,e),r.isDirty=t.defaultValue?R(e,p(s,e)):R()),t.keepError||(Q(r.errors,e),g.isValid&&F()),_.state.next({...r}))},clearErrors:e=>{e?k(e).forEach((e=>Q(r.errors,e))):r.errors={},_.state.next({errors:r.errors})},unregister:fe,setError:(e,t,n)=>{const s=(p(a,e,{_f:{}})._f||{}).ref;C(r.errors,e,{...t,ref:s}),_.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},setFocus:(e,t={})=>{const n=p(a,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:se}}const me=t=>{let{channels:n,register:r}=t;const a=[];if(n.length<1)return null;for(let t=0;t<n.length;t++)a.push((0,e.createElement)("option",{value:n[t].id},n[t].id+" - "+n[t].screenname));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("label",{for:"channelId"},(0,s.__)("Channel ID","textdomain")),(0,e.createElement)("select",l({},r("channelId"),{className:"dm__input",id:"channelId",name:"channelId"}),a))};var he=n=>{let{channelList:r,onSearching:a=(()=>null)}=n;const{register:i,handleSubmit:o}=function(e={}){const n=t.useRef(),[r,a]=t.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});n.current||(n.current={...fe(e),formState:r});const s=n.current.control;return s._options=e,function(e){const n=t.useRef(e);n.current=e,t.useEffect((()=>{const t=!e.disabled&&n.current.subject.subscribe({next:n.current.callback});return()=>{t&&t.unsubscribe()}}),[e.disabled])}({subject:s._subjects.state,callback:t.useCallback((e=>{((e,t,n)=>{const{name:r,...a}=e;return E(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find((e=>t[e]===(!n||b)))})(e,s._proxyFormState,!0)&&(s._formState={...s._formState,...e},a({...s._formState}))}),[s])}),t.useEffect((()=>{s._stateFlags.mount||(s._proxyFormState.isValid&&s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),t.useEffect((()=>{r.submitCount&&s._focusError()}),[s,r.submitCount]),n.current.formState=((e,t,n,r=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const a=s;return t._proxyFormState[a]!==b&&(t._proxyFormState[a]=!r||b),n&&(n[a]=!0),e[a]}});return a})(r,s),n.current}();return(0,e.createElement)("form",{onSubmit:o((e=>{a(e)})),id:"formFinder"},(0,e.createElement)("label",{htmlFor:"keywords"},(0,s.__)("Keywords","textdomain")),(0,e.createElement)("input",l({id:"keywords",type:"text",name:"keywords",className:"dm__input"},i("keywords"))),(0,e.createElement)(me,{channels:r,register:i}),(0,e.createElement)("label",{htmlFor:"find-global",className:"checkbox-label"},(0,e.createElement)("input",l({type:"checkbox",id:"find-global",name:"findGlobal"},i("findGlobal")))," ",(0,s.__)("Find global","textdomain")),(0,e.createElement)("label",{htmlFor:"find-playlist",className:"checkbox-label"},(0,e.createElement)("input",l({type:"checkbox",id:"find-playlist",name:"findPlaylist"},i("findPlaylist")))," ",(0,s.__)("Find playlist","textdomain")),(0,e.createElement)("button",{type:"submit",className:"action button"},(0,s.__)("Find","textdomain")))};const ye=t=>{let{contentData:n,callback:r=(()=>null)}=t;const a=[];if(0===n.length)a.push((0,e.createElement)("li",null));else if(void 0!==n.error){let t=n.error.message;t.includes("Invalid parameter")&&(t="Only authenticated users can use this filter."),a.push((0,e.createElement)("li",{className:"dm--grid-expand-2"},t))}else if(void 0!==n.list&&n.list.length>0){const t=n.list;if(t[0].title)for(let n=0;n<t.length;n++)a.push((0,e.createElement)("li",{key:t[n],className:`content__item ${t[n].private?"private":""} ${"ready"===t[n].status?"draft":""}`},(0,e.createElement)("button",{onClick:()=>r(t[n]),type:"button"},(0,e.createElement)("figure",{className:"content__image-wrapper"},(0,e.createElement)("div",{className:"content__placement"},(0,e.createElement)("img",{src:t[n].thumbnail_240_url,alt:t[n].title,className:"content__thumbnail"}))),(0,e.createElement)("span",{className:"content__title",title:t[n].title},t[n].title))));else for(let n=0;n<t.length;n++)a.push((0,e.createElement)("li",{key:t[n],className:"content__item "+(t[n].private?"private":"")},(0,e.createElement)("button",{onClick:()=>r(t[n]),type:"button"},(0,e.createElement)("figure",{className:"content__image-wrapper"},(0,e.createElement)("div",{className:"content__placement"},(0,e.createElement)("img",{src:t[n].thumbnail_240_url,alt:t[n].name,className:"content__thumbnail"}))),(0,e.createElement)("span",{className:"content__title",title:t[n].title},t[n].name))))}else a.push((0,e.createElement)("li",null,(0,s.__)("No video found…","textdomain")));return a};var pe=t=>{let{content:n,onAction:r=(()=>null)}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("ul",{className:"dm__search-results"},(0,e.createElement)(ye,{contentData:n,callback:r})))};function ve(t){const{contentData:n,currentPage:r,callback:a}=t;return 0===Object.entries(n).length||0===n.total||!1===n.has_more&&1===n.page?(0,e.createElement)(e.Fragment,null):1===n.page&&!0===n.has_more?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{type:"button",className:"components-button button action dm__next-button",onClick:()=>a(r+1)},(0,s.__)("Next","textdomain"))):!1===n.has_more&&1!==n.page?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{type:"button",className:"components-button button action dm__prev-button",onClick:()=>a(r-1)},(0,s.__)("Previous","textdomain"))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{type:"button",className:"components-button button action dm__prev-button",onClick:()=>a(r-1)},(0,s.__)("Previous","textdomain")),(0,e.createElement)("button",{type:"button",className:"components-button button action dm__next-button",onClick:()=>a(r+1)},(0,s.__)("Next","textdomain")))}const ge="data/dm-video",be={id:"",private:!1,private_id:"",status:"",thumbnail_240_url:"",title:"",name:""},_e={reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;return"SET_VIDEO"===t.type?{videoData:t.videoData}:e},actions:{setVideo:e=>({type:"SET_VIDEO",videoData:e})},selectors:{getVideoData:e=>e.videoData}},we=(0,i.createReduxStore)(ge,_e);(0,i.register)(we);var Ee=window.wp.apiFetch,ke=n.n(Ee);function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0;const r={path:e,method:t};return void 0!==n&&(r.data=n),ke()(r).then((e=>e)).catch((e=>{}))}"undefined"==typeof window?n(300):window.fetch;var Se=new WeakMap;class De extends e.Component{constructor(e){var t,n,r;super(e),r={writable:!0,value:""},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,n=Se),n.set(t,r),this.state={playlists:{},currentPage:1,allChannels:[],contentChannel:"",content:[],formData:{keywords:"",channelId:"",findGlobal:!1,findPlaylist:!1},loading:!0},this.setContent=this.setContent.bind(this),this.setupChannels=this.setupChannels.bind(this),this.findContent=this.findContent.bind(this),this.checkEditorMode=this.checkEditorMode.bind(this),this.addToBlock=this.addToBlock.bind(this)}findContent(e){this.setState({formData:e,loading:!0}),this.setContent()}async setContent(e){e=e||1,this.setState({currentPage:e});const t={data:{fields:"id,title,thumbnail_240_url,status,private,private_id",limit:10,flags:"no_live,exportable,verified",page:e,sort:"recent"}};!1!==this.state.formData.findPlaylist&&(t.data.fields="id,name,thumbnail_240_url,private",t.data.flags="verified"),""!==this.state.formData.keywords&&(t.data.search=this.state.formData.keywords);const n=void 0!==this.state.contentChannel.owners;if(!0!==this.state.formData.findGlobal&&this.state.formData.channelId?t.url="/user/"+this.state.formData.channelId+"/videos":n&&!0!==this.state.formData.findGlobal?(t.data.owners=this.state.contentChannel.owners,t.url="/videos"):t.url="/videos",this.state.formData.findPlaylist)if(!0!==this.state.formData.findGlobal&&this.state.formData.channelId)t.url="/user/"+this.state.formData.channelId+"/playlists",delete t.data.flags;else if(this.state.contentChannel.owners){const e=this.state.contentChannel.owners.split(",");t.owner=e[0],t.url="/playlists"}else t.url="/playlists";this.setState({content:await xe("/dm/v2/request-api","POST",t),loading:!1})}async setupChannels(){this.setState({allChannels:await xe("/dm/v2/get-option/channel_list"),contentChannel:await xe("dm/v2/get-option/options_manual_embed_content")})}async componentDidMount(){await this.setupChannels(),this.checkEditorMode(),this.state.allChannels.length>0?this.findContent({keywords:"",channelId:this.state.allChannels[0].id,findGlobal:!1,findPlaylist:!1}):await this.setContent()}checkEditorMode(){document.body.classList.contains("block-editor-page")?a(this,Se,"gutenberg"):a(this,Se,"classic-editor")}addToBlock(e){if("gutenberg"===function(e,t){return t.get?t.get.call(e):t.value}(this,r(this,Se,"get")))(0,i.dispatch)(ge).setVideo(e),function(e,t,n){var r,a,s;e=null!==(r=e)&&void 0!==r?r:"customEvent",t=null!==(a=t)&&void 0!==a?a:"index",n=null!==(s=n)&&void 0!==s?s:{};const i=new CustomEvent(e,{detail:{sender:t,customEventData:n},bubbles:!0,cancelable:!0});document.dispatchEvent(i)}("dm-video-updated","dm-video-component");else{let t="";!0===e.private?t+=' privatevideoid="'+e.private_id+'"':void 0!==e.name?t+=' playlistid="'+e.id+'"':t+=' videoid="'+e.id+'"',wp.media.editor.insert("[dm-player"+t+"]")}}render(){return(0,e.createElement)(o.PanelBody,null,(0,e.createElement)("div",{className:"dm__content-list"},(0,e.createElement)(he,{channelList:this.state.allChannels,onSearching:this.findContent}),this.state.loading?(0,e.createElement)("ul",{className:"dm__search-results"},(0,e.createElement)("li",null,(0,s.__)("loading…","textdomain"))):(0,e.createElement)(pe,{content:this.state.content,onAction:this.addToBlock}),(0,e.createElement)(ve,{currentPage:this.state.currentPage,callback:this.setContent,contentData:this.state.content})))}}const Ve="data/dm-sdk",Ae={connectionStatus:null},Fe={reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;return"SET_CONNECTION_STATUS"===t.type?{connectionStatus:t.status}:e},actions:{setConnectionStatus:e=>({type:"SET_CONNECTION_STATUS",status:e})},selectors:{getConnectionStatus:e=>e.connectionStatus}},Ce=(0,i.createReduxStore)(Ve,Fe);function Ne(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Te(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(0,i.register)(Ce);var Oe=new WeakSet,Me=new WeakSet,Pe=new WeakSet,Ie=new WeakSet,je=new WeakSet;function Be(){DM._oauth.tokenUrl="https://api.dailymotion.com/oauth/token",DM.Auth.isSessionExpired=(e,t)=>(void 0===e&&(e=DM._session),!e||!(e&&"expires_in"in e&&(new Date).getTime()<1e3*parseInt(e.expires_in,10))&&(delete e.expires_in,!0))}async function Le(){const e=await xe("/dm/v1/get-api-key");DM.init({apiKey:e.api_key,apiSecret:e.api_secret,status:!0,cookie:!0})}function Ue(){DM.Event.subscribe("auth.sessionChange",(e=>{if("connected"===(null==e?void 0:e.status)){let t=e.session;"expires_in"in e.session||(t.expires_in=t.expires),t.expires=t.expires+2419200,DM.Cookie.set(t)}}))}function qe(){return new Promise((e=>{DM.getLoginStatus((t=>{t.session?e(!0):e(!1)}))}))}async function Re(){const e=await Te(this,Ie,qe).call(this);(0,i.dispatch)(Ve).setConnectionStatus({connectionStatus:e});const t=new CustomEvent("dm-sdk-ready");document.dispatchEvent(t)}window.wp["components/buildStyle/style.css"];const Ge=()=>{const[t,n]=(0,e.useState)(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{className:"button",id:"insert-dailymotion",type:"button",onClick:()=>n(!0)},(0,e.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{className:"path",d:"m12.1479 18.5957c-2.4949 0-4.28131-1.7558-4.28131-4.0658 0-2.2176 1.78641-4.0965 4.09651-4.0965 2.2793 0 4.0349 1.7864 4.0349 4.1581 0 2.2794-1.7556 4.0042-3.8501 4.0042zm8.3521-18.5957-4.5329 1v7c-1.1088-1.41691-2.8028-1.8787-4.8049-1.8787-2.09443 0-3.97329.76993-5.5133 2.27917-1.72483 1.66323-2.6489 3.78863-2.6489 6.16033 0 2.5873.98562 4.8049 2.89526 6.499 1.44763 1.2936 3.17251 1.9402 5.17454 1.9402 1.9713 0 3.4498-.5236 4.8973-1.9402v1.9402h4.5329c0-7.6359 0-15.3641 0-23z",fill:"#2271b1"})),"Dailymotion"),t&&(0,e.createElement)(o.Modal,{className:"popup__content-finder",title:"Find a Video",onRequestClose:()=>n(!1)},(0,e.createElement)(De,{resultsPerPage:12})))};document.addEventListener("dm-sdk-ready",(()=>{const t=document.getElementById("wp-content-editor-tools"),n=document.createElement("span");n.id="dm-search-classic",t.appendChild(n),(0,e.render)((0,e.createElement)(Ge),document.getElementById("dm-search-classic"))})),new class{constructor(){Ne(this,je),Ne(this,Ie),Ne(this,Pe),Ne(this,Me),Ne(this,Oe),this.setupDm()}async setupDm(){await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>Boolean,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new Promise(((a,s)=>{let i=0;const o=setInterval((()=>{const l=e(),c=i>n||l;i+=t,l?(a(""),clearInterval(o)):c&&(s(new Error("waitFor(): "+r)),clearInterval(o))}),t)}))}((()=>"undefined"!=typeof DM),100,12e4,"Timeout waiting for DM loaded, please refresh and make sure your internet is active"),Te(this,Oe,Be).call(this),await Te(this,Me,Le).call(this),Te(this,Pe,Ue).call(this),await Te(this,je,Re).call(this)}}}()}();