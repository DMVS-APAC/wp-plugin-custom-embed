!function(){"use strict";var e={300:function(e,t,n){var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=window.wp.element,t=window.React;function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,r(e,t,"set"),n),n}var s=window.wp.i18n,i=window.wp.data,o=window.wp.components;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var u=e=>"checkbox"===e.type,c=e=>e instanceof Date,d=e=>null==e;const f=e=>"object"==typeof e;var m=e=>!d(e)&&!Array.isArray(e)&&f(e)&&!c(e),h=e=>m(e)&&e.target?u(e.target)?e.target.checked:e.target.value:e,p=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),y=e=>Array.isArray(e)?e.filter(Boolean):[],g=e=>void 0===e,v=(e,t,n)=>{if(!t||!m(e))return n;const r=y(t.split(/[,[\].]+?/)).reduce(((e,t)=>d(e)?e:e[t]),e);return g(r)||r===e?g(e[t])?n:e[t]:r};const b={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},w="pattern",E="required";t.createContext(null);var k=e=>m(e)&&!Object.keys(e).length,x=e=>Array.isArray(e)?e:[e];var S=e=>"string"==typeof e,D=(e,t,n,r,a)=>S(e)?(r&&t.watch.add(e),v(n,e,a)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),v(n,e)))):(r&&(t.watchAll=!0),n),V=e=>{const t=e.constructor&&e.constructor.prototype;return m(t)&&t.hasOwnProperty("isPrototypeOf")},A="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function F(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(A&&(e instanceof Blob||e instanceof FileList)||!n&&!m(e))return e;if(t=n?[]:{},Array.isArray(e)||V(e))for(const n in e)t[n]=F(e[n]);else t=e}return t}var C=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},N=e=>/^\w*$/.test(e),O=e=>y(e.replace(/["|']|\]/g,"").split(/\.|\[/));function T(e,t,n){let r=-1;const a=N(t)?[t]:O(t),s=a.length,i=s-1;for(;++r<s;){const t=a[r];let s=n;if(r!==i){const n=e[t];s=m(n)||Array.isArray(n)?n:isNaN(+a[r+1])?{}:[]}e[t]=s,e=e[t]}return e}const M=(e,t,n)=>{for(const r of n||Object.keys(e)){const n=v(e,r);if(n){const{_f:e,...r}=n;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else m(r)&&M(r,t)}}};var B=e=>({isOnSubmit:!e||e===_.onSubmit,isOnBlur:e===_.onBlur,isOnChange:e===_.onChange,isOnAll:e===_.all,isOnTouch:e===_.onTouched}),j=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),P=(e,t,n)=>{const r=y(v(e,n));return T(r,"root",t[n]),T(e,n,r),e},I=e=>"boolean"==typeof e,L=e=>"file"===e.type,U=e=>"function"==typeof e,R=e=>{if(!A)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},q=e=>S(e)||t.isValidElement(e),G=e=>"radio"===e.type,W=e=>e instanceof RegExp;const H={value:!1,isValid:!1},$={value:!0,isValid:!0};var z=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!g(e[0].attributes.value)?g(e[0].value)||""===e[0].value?$:{value:e[0].value,isValid:!0}:$:H}return H};const K={isValid:!1,value:null};var J=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),K):K;function Q(e,t,n="validate"){if(q(e)||Array.isArray(e)&&e.every(q)||I(e)&&!e)return{type:n,message:q(e)?e:"",ref:t}}var X=e=>m(e)&&!W(e)?e:{value:e,message:""},Y=async(e,t,n,r,a)=>{const{ref:s,refs:i,required:o,maxLength:l,minLength:c,min:f,max:h,pattern:p,validate:y,name:b,valueAsNumber:_,mount:x,disabled:D}=e._f,V=v(t,b);if(!x||D)return{};const A=i?i[0]:s,F=e=>{r&&A.reportValidity&&(A.setCustomValidity(I(e)?"":e||""),A.reportValidity())},N={},O=G(s),T=u(s),M=O||T,B=(_||L(s))&&g(s.value)&&g(V)||R(s)&&""===s.value||""===V||Array.isArray(V)&&!V.length,j=C.bind(null,b,n,N),P=(e,t,n,r="maxLength",a="minLength")=>{const i=e?t:n;N[b]={type:e?r:a,message:i,ref:s,...j(e?r:a,i)}};if(a?!Array.isArray(V)||!V.length:o&&(!M&&(B||d(V))||I(V)&&!V||T&&!z(i).isValid||O&&!J(i).isValid)){const{value:e,message:t}=q(o)?{value:!!o,message:o}:X(o);if(e&&(N[b]={type:E,message:t,ref:A,...j(E,t)},!n))return F(t),N}if(!(B||d(f)&&d(h))){let e,t;const r=X(h),a=X(f);if(d(V)||isNaN(V)){const n=s.valueAsDate||new Date(V),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;S(r.value)&&V&&(e=o?i(V)>i(r.value):l?V>r.value:n>new Date(r.value)),S(a.value)&&V&&(t=o?i(V)<i(a.value):l?V<a.value:n<new Date(a.value))}else{const n=s.valueAsNumber||(V?+V:V);d(r.value)||(e=n>r.value),d(a.value)||(t=n<a.value)}if((e||t)&&(P(!!e,r.message,a.message,"max","min"),!n))return F(N[b].message),N}if((l||c)&&!B&&(S(V)||a&&Array.isArray(V))){const e=X(l),t=X(c),r=!d(e.value)&&V.length>e.value,a=!d(t.value)&&V.length<t.value;if((r||a)&&(P(r,e.message,t.message),!n))return F(N[b].message),N}if(p&&!B&&S(V)){const{value:e,message:t}=X(p);if(W(e)&&!V.match(e)&&(N[b]={type:w,message:t,ref:s,...j(w,t)},!n))return F(t),N}if(y)if(U(y)){const e=Q(await y(V,t),A);if(e&&(N[b]={...e,...j("validate",e.message)},!n))return F(e.message),N}else if(m(y)){let e={};for(const r in y){if(!k(e)&&!n)break;const a=Q(await y[r](V,t),A,r);a&&(e={...a,...j(r,a.message)},F(a.message),n&&(N[b]=e))}if(!k(e)&&(N[b]={ref:A,...e},!n))return N}return F(!0),N};function Z(e,t){const n=Array.isArray(t)?t:N(t)?[t]:O(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=g(e)?r++:e[t[r++]];return e}(e,n),a=n.length-1,s=n[a];return r&&delete r[s],0!==a&&(m(r)&&k(r)||Array.isArray(r)&&function(e){for(const t in e)if(!g(e[t]))return!1;return!0}(r))&&Z(e,n.slice(0,-1)),e}function ee(){let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var te=e=>d(e)||!f(e);function ne(e,t){if(te(e)||te(t))return e===t;if(c(e)&&c(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const a of n){const n=e[a];if(!r.includes(a))return!1;if("ref"!==a){const e=t[a];if(c(n)&&c(e)||m(n)&&m(e)||Array.isArray(n)&&Array.isArray(e)?!ne(n,e):n!==e)return!1}}return!0}var re=e=>"select-multiple"===e.type,ae=e=>G(e)||u(e),se=e=>R(e)&&e.isConnected,ie=e=>{for(const t in e)if(U(e[t]))return!0;return!1};function oe(e,t={}){const n=Array.isArray(e);if(m(e)||n)for(const n in e)Array.isArray(e[n])||m(e[n])&&!ie(e[n])?(t[n]=Array.isArray(e[n])?[]:{},oe(e[n],t[n])):d(e[n])||(t[n]=!0);return t}function le(e,t,n){const r=Array.isArray(e);if(m(e)||r)for(const r in e)Array.isArray(e[r])||m(e[r])&&!ie(e[r])?g(t)||te(n[r])?n[r]=Array.isArray(e[r])?oe(e[r],[]):{...oe(e[r])}:le(e[r],d(t)?{}:t[r],n[r]):ne(e[r],t[r])?delete n[r]:n[r]=!0;return n}var ue=(e,t)=>le(e,t,oe(t)),ce=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>g(e)?e:t?""===e?NaN:e?+e:e:n&&S(e)?new Date(e):r?r(e):e;function de(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return L(t)?t.files:G(t)?J(e.refs).value:re(t)?[...t.selectedOptions].map((({value:e})=>e)):u(t)?z(e.refs).value:ce(g(t.value)?e.ref.value:t.value,e)}var fe=(e,t,n,r)=>{const a={};for(const n of e){const e=v(t,n);e&&T(a,n,e._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}},me=e=>g(e)?e:W(e)?e.source:m(e)?W(e.value)?e.value.source:e.value:e,he=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function pe(e,t,n){const r=v(e,n);if(r||N(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const r=a.join("."),s=v(t,r),i=v(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(i&&i.type)return{name:r,error:i};a.pop()}return{name:n}}var ye=(e,t,n,r,a)=>!a.isOnAll&&(!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:!(n?r.isOnChange:a.isOnChange)||e),ge=(e,t)=>!y(v(e,t)).length&&Z(e,t);const ve={mode:_.onSubmit,reValidateMode:_.onChange,shouldFocusError:!0};function be(e={},t){let n={...ve,...e};const r=e.resetOptions&&e.resetOptions.keepDirtyValues;let a,s={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},o=(m(n.defaultValues)||m(n.values))&&F(n.defaultValues||n.values)||{},l=n.shouldUnregister?{}:F(o),f={action:!1,mount:!1,watch:!1},w={mount:new Set,unMount:new Set,array:new Set,watch:new Set},E=0;const V={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},C={watch:ee(),array:ee(),state:ee()},N=B(n.mode),O=B(n.reValidateMode),q=n.criteriaMode===_.all,G=async e=>{if(V.isValid||e){const e=n.resolver?k((await z()).errors):await K(i,!0);e!==s.isValid&&C.state.next({isValid:e})}},W=e=>V.isValidating&&C.state.next({isValidating:e}),H=(e,t,n,r)=>{const a=v(i,e);if(a){const s=v(l,e,g(n)?v(o,e):n);g(s)||r&&r.defaultChecked||t?T(l,e,t?s:de(a._f)):X(e,s),f.mount&&G()}},$=(e,t,n,r,a)=>{let i=!1,l=!1;const u={name:e};if(!n||r){V.isDirty&&(l=s.isDirty,s.isDirty=u.isDirty=J(),i=l!==u.isDirty);const n=ne(v(o,e),t);l=v(s.dirtyFields,e),n?Z(s.dirtyFields,e):T(s.dirtyFields,e,!0),u.dirtyFields=s.dirtyFields,i=i||V.dirtyFields&&l!==!n}if(n){const t=v(s.touchedFields,e);t||(T(s.touchedFields,e,n),u.touchedFields=s.touchedFields,i=i||V.touchedFields&&t!==n)}return i&&a&&C.state.next(u),i?u:{}},z=async e=>await n.resolver(l,n.context,fe(e||w.mount,i,n.criteriaMode,n.shouldUseNativeValidation)),K=async(e,t,r={valid:!0})=>{for(const a in e){const i=e[a];if(i){const{_f:e,...a}=i;if(e){const a=w.array.has(e.name),o=await Y(i,l,q,n.shouldUseNativeValidation,a);if(o[e.name]&&(r.valid=!1,t))break;!t&&(v(o,e.name)?a?P(s.errors,o,e.name):T(s.errors,e.name,o[e.name]):Z(s.errors,e.name))}a&&await K(a,t,r)}}return r.valid},J=(e,t)=>(e&&t&&T(l,e,t),!ne(_e(),o)),Q=(e,t,n)=>D(e,w,{...f.mount?l:g(t)?o:S(e)?{[e]:t}:t},n,t),X=(e,t,n={})=>{const r=v(i,e);let a=t;if(r){const n=r._f;n&&(!n.disabled&&T(l,e,ce(t,n)),a=R(n.ref)&&d(t)?"":t,re(n.ref)?[...n.ref.options].forEach((e=>e.selected=a.includes(e.value))):n.refs?u(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(a)?!!a.find((t=>t===e.value)):a===e.value))):n.refs[0]&&(n.refs[0].checked=!!a):n.refs.forEach((e=>e.checked=e.value===a)):L(n.ref)?n.ref.value="":(n.ref.value=a,n.ref.type||C.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&$(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&be(e)},ie=(e,t,n)=>{for(const r in t){const a=t[r],s=`${e}.${r}`,o=v(i,s);!w.array.has(e)&&te(a)&&(!o||o._f)||c(a)?X(s,a,n):ie(s,a,n)}},oe=(e,n,r={})=>{const a=v(i,e),s=w.array.has(e),u=F(n);T(l,e,u),s?(C.array.next({name:e,values:l}),(V.isDirty||V.dirtyFields)&&r.shouldDirty&&C.state.next({name:e,dirtyFields:ue(o,l),isDirty:J(e,u)})):!a||a._f||d(u)?X(e,u,r):ie(e,u,r),j(e,w)&&C.state.next({}),C.watch.next({name:e}),!f.mount&&t()},le=async t=>{const r=t.target;let o=r.name;const u=v(i,o);if(u){let c,d;const f=r.type?de(u._f):h(t),m=t.type===b.BLUR||t.type===b.FOCUS_OUT,p=!he(u._f)&&!n.resolver&&!v(s.errors,o)&&!u._f.deps||ye(m,v(s.touchedFields,o),s.isSubmitted,O,N),y=j(o,w,m);T(l,o,f),m?(u._f.onBlur&&u._f.onBlur(t),a&&a(0)):u._f.onChange&&u._f.onChange(t);const g=$(o,f,m,!1),_=!k(g)||y;if(!m&&C.watch.next({name:o,type:t.type}),p)return V.isValid&&G(),_&&C.state.next({name:o,...y?{}:g});if(!m&&y&&C.state.next({}),W(!0),n.resolver){const{errors:e}=await z([o]),t=pe(s.errors,i,o),n=pe(e,i,t.name||o);c=n.error,o=n.name,d=k(e)}else c=(await Y(u,l,q,n.shouldUseNativeValidation))[o],c?d=!1:V.isValid&&(d=await K(i,!0));u._f.deps&&be(u._f.deps),((t,n,r,i)=>{const o=v(s.errors,t),l=V.isValid&&I(n)&&s.isValid!==n;var u;if(e.delayError&&r?(u=()=>((e,t)=>{T(s.errors,e,t),C.state.next({errors:s.errors})})(t,r),a=e=>{clearTimeout(E),E=window.setTimeout(u,e)},a(e.delayError)):(clearTimeout(E),a=null,r?T(s.errors,t,r):Z(s.errors,t)),(r?!ne(o,r):o)||!k(i)||l){const e={...i,...l&&I(n)?{isValid:n}:{},errors:s.errors,name:t};s={...s,...e},C.state.next(e)}W(!1)})(o,d,c,g)}},be=async(e,t={})=>{let r,a;const o=x(e);if(W(!0),n.resolver){const t=await(async e=>{const{errors:t}=await z();if(e)for(const n of e){const e=v(t,n);e?T(s.errors,n,e):Z(s.errors,n)}else s.errors=t;return t})(g(e)?e:o);r=k(t),a=e?!o.some((e=>v(t,e))):r}else e?(a=(await Promise.all(o.map((async e=>{const t=v(i,e);return await K(t&&t._f?{[e]:t}:t)})))).every(Boolean),(a||s.isValid)&&G()):a=r=await K(i);return C.state.next({...!S(e)||V.isValid&&r!==s.isValid?{}:{name:e},...n.resolver||!e?{isValid:r}:{},errors:s.errors,isValidating:!1}),t.shouldFocus&&!a&&M(i,(e=>e&&v(s.errors,e)),e?o:w.mount),a},_e=e=>{const t={...o,...f.mount?l:{}};return g(e)?t:S(e)?v(t,e):e.map((e=>v(t,e)))},we=(e,t)=>({invalid:!!v((t||s).errors,e),isDirty:!!v((t||s).dirtyFields,e),isTouched:!!v((t||s).touchedFields,e),error:v((t||s).errors,e)}),Ee=(e,t={})=>{for(const r of e?x(e):w.mount)w.mount.delete(r),w.array.delete(r),v(i,r)&&(t.keepValue||(Z(i,r),Z(l,r)),!t.keepError&&Z(s.errors,r),!t.keepDirty&&Z(s.dirtyFields,r),!t.keepTouched&&Z(s.touchedFields,r),!n.shouldUnregister&&!t.keepDefaultValue&&Z(o,r));C.watch.next({}),C.state.next({...s,...t.keepDirty?{isDirty:J()}:{}}),!t.keepIsValid&&G()},ke=(e,t={})=>{let r=v(i,e);const a=I(t.disabled);return T(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),w.mount.add(e),r?a&&T(l,e,t.disabled?void 0:v(l,e,de(r._f))):H(e,!0,t.value),{...a?{disabled:t.disabled}:{},...n.shouldUseNativeValidation?{required:!!t.required,min:me(t.min),max:me(t.max),minLength:me(t.minLength),maxLength:me(t.maxLength),pattern:me(t.pattern)}:{},name:e,onChange:le,onBlur:le,ref:a=>{if(a){ke(e,t),r=v(i,e);const n=g(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,s=ae(n),l=r._f.refs||[];if(s?l.find((e=>e===n)):n===r._f.ref)return;T(i,e,{_f:{...r._f,...s?{refs:[...l.filter(se),n,...Array.isArray(v(o,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),H(e,!1,void 0,n)}else r=v(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!p(w.array,e)||!f.action)&&w.unMount.add(e)}}},xe=()=>n.shouldFocusError&&M(i,(e=>e&&v(s.errors,e)),w.mount),Se=(n,a={})=>{const u=n||o,c=F(u),d=n&&!k(n)?c:o;if(a.keepDefaultValues||(o=u),!a.keepValues){if(a.keepDirtyValues||r)for(const e of w.mount)v(s.dirtyFields,e)?T(d,e,v(l,e)):oe(e,v(d,e));else{if(A&&g(n))for(const e of w.mount){const t=v(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(R(e)){const t=e.closest("form");if(t){t.reset();break}}}}i={}}l=e.shouldUnregister?a.keepDefaultValues?F(o):{}:c,C.array.next({values:d}),C.watch.next({values:d})}w={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!f.mount&&t(),f.mount=!V.isValid||!!a.keepIsValid,f.watch=!!e.shouldUnregister,C.state.next({submitCount:a.keepSubmitCount?s.submitCount:0,isDirty:a.keepDirty||a.keepDirtyValues?s.isDirty:!(!a.keepDefaultValues||ne(n,o)),isSubmitted:!!a.keepIsSubmitted&&s.isSubmitted,dirtyFields:a.keepDirty||a.keepDirtyValues?s.dirtyFields:a.keepDefaultValues&&n?ue(o,n):{},touchedFields:a.keepTouched?s.touchedFields:{},errors:a.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},De=(e,t)=>Se(U(e)?e(l):e,t);return U(n.defaultValues)&&n.defaultValues().then((e=>{De(e,n.resetOptions),C.state.next({isLoading:!1})})),{control:{register:ke,unregister:Ee,getFieldState:we,_executeSchema:z,_focusError:xe,_getWatch:Q,_getDirty:J,_updateValid:G,_removeUnmounted:()=>{for(const e of w.unMount){const t=v(i,e);t&&(t._f.refs?t._f.refs.every((e=>!se(e))):!se(t._f.ref))&&Ee(e)}w.unMount=new Set},_updateFieldArray:(e,t=[],n,r,a=!0,u=!0)=>{if(r&&n){if(f.action=!0,u&&Array.isArray(v(i,e))){const t=n(v(i,e),r.argA,r.argB);a&&T(i,e,t)}if(u&&Array.isArray(v(s.errors,e))){const t=n(v(s.errors,e),r.argA,r.argB);a&&T(s.errors,e,t),ge(s.errors,e)}if(V.touchedFields&&u&&Array.isArray(v(s.touchedFields,e))){const t=n(v(s.touchedFields,e),r.argA,r.argB);a&&T(s.touchedFields,e,t)}V.dirtyFields&&(s.dirtyFields=ue(o,l)),C.state.next({name:e,isDirty:J(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else T(l,e,t)},_getFieldArray:t=>y(v(f.mount?l:o,t,e.shouldUnregister?v(o,t,[]):[])),_reset:Se,_updateFormState:e=>{s={...s,...e}},_subjects:C,_proxyFormState:V,get _fields(){return i},get _formValues(){return l},get _stateFlags(){return f},set _stateFlags(e){f=e},get _defaultValues(){return o},get _names(){return w},set _names(e){w=e},get _formState(){return s},set _formState(e){s=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:be,register:ke,handleSubmit:(e,t)=>async r=>{r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let a=F(l);if(C.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await z();s.errors=e,a=t}else await K(i);Z(s.errors,"root"),k(s.errors)?(C.state.next({errors:{}}),await e(a,r)):(t&&await t({...s.errors},r),xe()),C.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:k(s.errors),submitCount:s.submitCount+1,errors:s.errors})},watch:(e,t)=>U(e)?C.watch.subscribe({next:n=>e(Q(void 0,t),n)}):Q(e,t,!0),setValue:oe,getValues:_e,reset:De,resetField:(e,t={})=>{v(i,e)&&(g(t.defaultValue)?oe(e,v(o,e)):(oe(e,t.defaultValue),T(o,e,t.defaultValue)),t.keepTouched||Z(s.touchedFields,e),t.keepDirty||(Z(s.dirtyFields,e),s.isDirty=t.defaultValue?J(e,v(o,e)):J()),t.keepError||(Z(s.errors,e),V.isValid&&G()),C.state.next({...s}))},clearErrors:e=>{e&&x(e).forEach((e=>Z(s.errors,e))),C.state.next({errors:e?s.errors:{}})},unregister:Ee,setError:(e,t,n)=>{const r=(v(i,e,{_f:{}})._f||{}).ref;T(s.errors,e,{...t,ref:r}),C.state.next({name:e,errors:s.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()},setFocus:(e,t={})=>{const n=v(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:we}}const _e=t=>{let{channels:n,register:r}=t;const a=[];if(n.length<1)return null;for(let t=0;t<n.length;t++)a.push((0,e.createElement)("option",{value:n[t].id},n[t].id+" - "+n[t].screenname));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("label",{for:"channelId"},(0,s.__)("Channel ID","textdomain")),(0,e.createElement)("select",l({},r("channelId"),{className:"dm__input",id:"channelId",name:"channelId"}),a))};var we=n=>{let{channelList:r,onSearching:a=(()=>null)}=n;const{register:i,handleSubmit:o}=function(e={}){const n=t.useRef(),[r,a]=t.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:U(e.defaultValues)?void 0:e.defaultValues});n.current||(n.current={...be(e,(()=>a((e=>({...e}))))),formState:r});const s=n.current.control;return s._options=e,function(e){const n=t.useRef(e);n.current=e,t.useEffect((()=>{const t=!e.disabled&&n.current.subject.subscribe({next:n.current.next});return()=>{t&&t.unsubscribe()}}),[e.disabled])}({subject:s._subjects.state,next:e=>{((e,t,n,r)=>{n(e);const{name:a,...s}=e;return k(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!r||_.all)))})(e,s._proxyFormState,s._updateFormState,!0)&&a({...s._formState})}}),t.useEffect((()=>{s._stateFlags.mount||(s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),t.useEffect((()=>{e.values&&!ne(e.values,s._defaultValues)&&s._reset(e.values,s._options.resetOptions)}),[e.values,s]),t.useEffect((()=>{r.submitCount&&s._focusError()}),[s,r.submitCount]),n.current.formState=((e,t,n,r=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const a=s;return t._proxyFormState[a]!==_.all&&(t._proxyFormState[a]=!r||_.all),n&&(n[a]=!0),e[a]}});return a})(r,s),n.current}();return(0,e.createElement)("form",{onSubmit:o((e=>{a(e)})),id:"formFinder"},(0,e.createElement)("label",{htmlFor:"keywords"},(0,s.__)("Keywords","textdomain")),(0,e.createElement)("input",l({id:"keywords",type:"text",name:"keywords",className:"dm__input"},i("keywords"))),(0,e.createElement)(_e,{channels:r,register:i}),(0,e.createElement)("label",{htmlFor:"find-global",className:"checkbox-label"},(0,e.createElement)("input",l({type:"checkbox",id:"find-global",name:"findGlobal"},i("findGlobal")))," ",(0,s.__)("Find global","textdomain")),(0,e.createElement)("label",{htmlFor:"find-playlist",className:"checkbox-label"},(0,e.createElement)("input",l({type:"checkbox",id:"find-playlist",name:"findPlaylist"},i("findPlaylist")))," ",(0,s.__)("Find playlist","textdomain")),(0,e.createElement)("button",{type:"submit",className:"action button"},(0,s.__)("Find","textdomain")))};const Ee=t=>{let{contentData:n,callback:r=(()=>null)}=t;const a=[];if(0===n.length)a.push((0,e.createElement)("li",null));else if(void 0!==n.error){let t=n.error.message;t.includes("Invalid parameter")&&(t="Only authenticated users can use this filter."),a.push((0,e.createElement)("li",{className:"dm--grid-expand-2"},t))}else if(void 0!==n.list&&n.list.length>0){const t=n.list;if(t[0].title)for(let n=0;n<t.length;n++)a.push((0,e.createElement)("li",{key:t[n],className:`content__item ${t[n].private?"private":""} ${"ready"===t[n].status?"draft":""}`},(0,e.createElement)("button",{onClick:()=>r(t[n]),type:"button"},(0,e.createElement)("figure",{className:"content__image-wrapper"},(0,e.createElement)("div",{className:"content__placement"},(0,e.createElement)("img",{src:t[n].thumbnail_240_url,alt:t[n].title,className:"content__thumbnail"}))),(0,e.createElement)("span",{className:"content__title",title:t[n].title},t[n].title))));else for(let n=0;n<t.length;n++)a.push((0,e.createElement)("li",{key:t[n],className:"content__item "+(t[n].private?"private":"")},(0,e.createElement)("button",{onClick:()=>r(t[n]),type:"button"},(0,e.createElement)("figure",{className:"content__image-wrapper"},(0,e.createElement)("div",{className:"content__placement"},(0,e.createElement)("img",{src:t[n].thumbnail_240_url,alt:t[n].name,className:"content__thumbnail"}))),(0,e.createElement)("span",{className:"content__title",title:t[n].title},t[n].name))))}else a.push((0,e.createElement)("li",null,(0,s.__)("No video found…","textdomain")));return a};var ke=t=>{let{content:n,onAction:r=(()=>null)}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("ul",{className:"dm__search-results"},(0,e.createElement)(Ee,{contentData:n,callback:r})))};function xe(t){const{contentData:n,currentPage:r,callback:a}=t;return 0===Object.entries(n).length||0===n.total||!1===n.has_more&&1===n.page?(0,e.createElement)(e.Fragment,null):1===n.page&&!0===n.has_more?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{type:"button",className:"components-button button action dm__next-button",onClick:()=>a(r+1)},(0,s.__)("Next","textdomain"))):!1===n.has_more&&1!==n.page?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{type:"button",className:"components-button button action dm__prev-button",onClick:()=>a(r-1)},(0,s.__)("Previous","textdomain"))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{type:"button",className:"components-button button action dm__prev-button",onClick:()=>a(r-1)},(0,s.__)("Previous","textdomain")),(0,e.createElement)("button",{type:"button",className:"components-button button action dm__next-button",onClick:()=>a(r+1)},(0,s.__)("Next","textdomain")))}const Se="data/dm-video",De={id:"",private:!1,private_id:"",status:"",thumbnail_240_url:"",title:"",name:""},Ve={reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;return"SET_VIDEO"===t.type?{videoData:t.videoData}:e},actions:{setVideo(e){return{type:"SET_VIDEO",videoData:e}}},selectors:{getVideoData(e){return e.videoData}}},Ae=(0,i.createReduxStore)(Se,Ve);(0,i.register)(Ae);var Fe=window.wp.apiFetch,Ce=n.n(Fe);function Ne(e){let t=arguments.length>2?arguments[2]:void 0;const n={path:e,method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return void 0!==t&&(n.data=t),Ce()(n).then((e=>e)).catch((e=>{}))}"undefined"==typeof window?n(300):window.fetch;var Oe=new WeakMap;class Te extends e.Component{constructor(e){var t,n,r;super(e),r={writable:!0,value:""},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,n=Oe),n.set(t,r),this.state={playlists:{},currentPage:1,allChannels:[],contentChannel:"",content:[],formData:{keywords:"",channelId:"",findGlobal:!1,findPlaylist:!1},loading:!0},this.setContent=this.setContent.bind(this),this.setupChannels=this.setupChannels.bind(this),this.findContent=this.findContent.bind(this),this.checkEditorMode=this.checkEditorMode.bind(this),this.addToBlock=this.addToBlock.bind(this)}findContent(e){this.setState({formData:e,loading:!0}),this.setContent()}async setContent(e){e=e||1,this.setState({currentPage:e});const t={data:{fields:"id,title,thumbnail_240_url,status,private,private_id",limit:10,flags:"no_live,exportable,verified",page:e,sort:"recent"}};!1!==this.state.formData.findPlaylist&&(t.data.fields="id,name,thumbnail_240_url,private",t.data.flags="verified"),""!==this.state.formData.keywords&&(t.data.search=this.state.formData.keywords);const n=void 0!==this.state.contentChannel.owners;if(!0!==this.state.formData.findGlobal&&this.state.formData.channelId?t.url="/user/"+this.state.formData.channelId+"/videos":n&&!0!==this.state.formData.findGlobal?(t.data.owners=this.state.contentChannel.owners,t.url="/videos"):t.url="/videos",this.state.formData.findPlaylist)if(!0!==this.state.formData.findGlobal&&this.state.formData.channelId)t.url="/user/"+this.state.formData.channelId+"/playlists",delete t.data.flags;else if(this.state.contentChannel.owners){const e=this.state.contentChannel.owners.split(",");t.owner=e[0],t.url="/playlists"}else t.url="/playlists";this.setState({content:await Ne("/dm/v2/request-api","POST",t),loading:!1})}async setupChannels(){this.setState({allChannels:await Ne("/dm/v2/get-option/channel_list"),contentChannel:await Ne("dm/v2/get-option/options_manual_embed_content")})}async componentDidMount(){await this.setupChannels(),this.checkEditorMode(),this.state.allChannels.length>0?this.findContent({keywords:"",channelId:this.state.allChannels[0].id,findGlobal:!1,findPlaylist:!1}):await this.setContent()}checkEditorMode(){document.body.classList.contains("block-editor-page")?a(this,Oe,"gutenberg"):a(this,Oe,"classic-editor")}addToBlock(e){if("gutenberg"===function(e,t){return t.get?t.get.call(e):t.value}(this,r(this,Oe,"get")))(0,i.dispatch)(Se).setVideo(e),function(e,t,n){var r,a,s;e=null!==(r=e)&&void 0!==r?r:"customEvent",t=null!==(a=t)&&void 0!==a?a:"index",n=null!==(s=n)&&void 0!==s?s:{};const i=new CustomEvent(e,{detail:{sender:t,customEventData:n},bubbles:!0,cancelable:!0});document.dispatchEvent(i)}("dm-video-updated","dm-video-component");else{let t="";!0===e.private?t+=' privatevideoid="'+e.private_id+'"':void 0!==e.name?t+=' playlistid="'+e.id+'"':t+=' videoid="'+e.id+'"',wp.media.editor.insert("[dm-player"+t+"]")}}render(){return(0,e.createElement)(o.PanelBody,null,(0,e.createElement)("div",{className:"dm__content-list"},(0,e.createElement)(we,{channelList:this.state.allChannels,onSearching:this.findContent}),this.state.loading?(0,e.createElement)("ul",{className:"dm__search-results"},(0,e.createElement)("li",null,(0,s.__)("loading…","textdomain"))):(0,e.createElement)(ke,{content:this.state.content,onAction:this.addToBlock}),(0,e.createElement)(xe,{currentPage:this.state.currentPage,callback:this.setContent,contentData:this.state.content})))}}const Me="data/dm-sdk",Be={connectionStatus:null},je={reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;return"SET_CONNECTION_STATUS"===t.type?{connectionStatus:t.status}:e},actions:{setConnectionStatus(e){return{type:"SET_CONNECTION_STATUS",status:e}}},selectors:{getConnectionStatus(e){return e.connectionStatus}}},Pe=(0,i.createReduxStore)(Me,je);function Ie(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Le(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(0,i.register)(Pe);var Ue=new WeakSet,Re=new WeakSet,qe=new WeakSet,Ge=new WeakSet,We=new WeakSet;function He(){DM._oauth.tokenUrl="https://api.dailymotion.com/oauth/token",DM.Auth.isSessionExpired=(e,t)=>(void 0===e&&(e=DM._session),!e||!(e&&"expires_in"in e&&(new Date).getTime()<1e3*parseInt(e.expires_in,10))&&(delete e.expires_in,!0))}async function $e(){const e=await Ne("/dm/v1/get-api-key");DM.init({apiKey:e.api_key,apiSecret:e.api_secret,status:!0,cookie:!0})}function ze(){DM.Event.subscribe("auth.sessionChange",(e=>{if("connected"===e?.status){let t=e.session;"expires_in"in e.session||(t.expires_in=t.expires),t.expires=t.expires+2419200,DM.Cookie.set(t)}}))}function Ke(){return new Promise((e=>{DM.getLoginStatus((t=>{t.session?e(!0):e(!1)}))}))}async function Je(){const e=await Le(this,Ge,Ke).call(this);(0,i.dispatch)(Me).setConnectionStatus({connectionStatus:e});const t=new CustomEvent("dm-sdk-ready");document.dispatchEvent(t)}window.wp["components/buildStyle/style.css"];const Qe=()=>{const[t,n]=(0,e.useState)(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{className:"button",id:"insert-dailymotion",type:"button",onClick:()=>n(!0)},(0,e.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{className:"path",d:"m12.1479 18.5957c-2.4949 0-4.28131-1.7558-4.28131-4.0658 0-2.2176 1.78641-4.0965 4.09651-4.0965 2.2793 0 4.0349 1.7864 4.0349 4.1581 0 2.2794-1.7556 4.0042-3.8501 4.0042zm8.3521-18.5957-4.5329 1v7c-1.1088-1.41691-2.8028-1.8787-4.8049-1.8787-2.09443 0-3.97329.76993-5.5133 2.27917-1.72483 1.66323-2.6489 3.78863-2.6489 6.16033 0 2.5873.98562 4.8049 2.89526 6.499 1.44763 1.2936 3.17251 1.9402 5.17454 1.9402 1.9713 0 3.4498-.5236 4.8973-1.9402v1.9402h4.5329c0-7.6359 0-15.3641 0-23z",fill:"#2271b1"})),"Dailymotion"),t&&(0,e.createElement)(o.Modal,{className:"popup__content-finder",title:"Find a Video",onRequestClose:()=>n(!1)},(0,e.createElement)(Te,{resultsPerPage:12})))};document.addEventListener("dm-sdk-ready",(()=>{const t=document.getElementById("wp-content-editor-tools"),n=document.createElement("span");n.id="dm-search-classic",t.appendChild(n),(0,e.render)((0,e.createElement)(Qe),document.getElementById("dm-search-classic"))})),new class{constructor(){Ie(this,We),Ie(this,Ge),Ie(this,qe),Ie(this,Re),Ie(this,Ue),this.setupDm()}async setupDm(){await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>Boolean,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new Promise(((a,s)=>{let i=0;const o=setInterval((()=>{const l=e(),u=i>n||l;i+=t,l?(a(""),clearInterval(o)):u&&(s(new Error("waitFor(): "+r)),clearInterval(o))}),t)}))}((()=>"undefined"!=typeof DM),100,12e4,"Timeout waiting for DM loaded, please refresh and make sure your internet is active"),Le(this,Ue,He).call(this),await Le(this,Re,$e).call(this),Le(this,qe,ze).call(this),await Le(this,We,Je).call(this)}}}()}();