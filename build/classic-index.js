!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=31)}([function(t,e){t.exports=window.wp.element},function(t,e){t.exports=window.regeneratorRuntime},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function i(t){n(s,a,o,i,c,"next",t)}function c(t){n(s,a,o,i,c,"throw",t)}i(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=window.wp.data},function(t,e){t.exports=window.wp.i18n},function(t,e,n){var r=n(25),a=n(16);t.exports=function(t,e){var n=a(t,e,"get");return r(t,n)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n(3),n(1);var r=n(17),a=n.n(r);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,r={path:t,method:e};return void 0!==n&&(r.data=n),new Promise((function(t){a()(r).then((function(e){t(e)}))}))}"undefined"==typeof window?n(26):window.fetch},function(t,e,n){var r=n(24),a=n(16);t.exports=function(t,e,n){var o=a(t,e,"set");return r(t,o,n),n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(22);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(23).default,a=n(2);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(4),a="data/dm-sdk",o={connectionStatus:null},s={reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CONNECTION_STATUS":return{connectionStatus:e.status}}return t},actions:{setConnectionStatus:function(t){return{type:"SET_CONNECTION_STATUS",status:t}}},selectors:{getConnectionStatus:function(t){return t.connectionStatus}}},i=Object(r.createReduxStore)(a,s);Object(r.register)(i)},function(t,e){t.exports=window.wp.components},function(t,e){t.exports=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=window.wp.apiFetch},function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var r=n(3),a=n.n(r),o=n(8),s=n.n(o),i=n(9),c=n.n(i),u=n(2),l=n.n(u),d=n(12),p=n.n(d),f=n(13),h=n.n(f),m=n(7),v=n.n(m),b=n(11),y=n.n(b),g=n(6),_=n.n(g),x=n(0),w=n(1),O=n.n(w),k=n(15),j=n(4),E=n(10);var P=new WeakMap,S=new WeakMap,D=new WeakSet,N=function(t){p()(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v()(r);if(o){var n=v()(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h()(this,t)});function u(t){var e;return s()(this,u),e=i.call(this,t),D.add(l()(e)),P.set(l()(e),{writable:!0,value:{title:"",thumbnail_240_url:"",id:""}}),S.set(l()(e),{writable:!0,value:""}),e.state={videoData:_()(l()(e),P)},y()(l()(e),S,function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(l()(e),D,C).call(l()(e))),e.getContent=e.getContent.bind(l()(e)),e.showImage=e.showImage.bind(l()(e)),e.subscribes(),e}return c()(u,[{key:"componentDidMount",value:function(){this.setVideo()}},{key:"getContent",value:(n=a()(O.a.mark((function t(){var e,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("gutenberg"!==_()(this,S)){t.next=4;break}return t.abrupt("return",Object(j.select)("core/editor").getEditedPostAttribute("meta")._dm_video_data);case 4:return t.next=6,Object(E.a)("/dm/v1/custom-post-meta/","POST",{post_id:postId,meta_name:"_dm_video_data"});case 6:return e=t.sent,n=JSON.parse(e),document.getElementById("dm_video_data").setAttribute("value",JSON.stringify(n)),t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"setVideo",value:(e=a()(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getContent();case 2:e=t.sent,this.setState({videoData:""===e?_()(this,P):JSON.parse(e)});case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"subscribes",value:function(){var t=this;"gutenberg"===_()(this,S)?Object(j.subscribe)((function(e){t.setVideo()})):document.addEventListener("dm-video-updated",(function(e){t.setState({videoData:e.detail.videoData})}))}},{key:"showImage",value:function(){return""!==this.state.videoData.title||""!==this.state.videoData.name?Object(x.createElement)("div",{className:"selected-video"},Object(x.createElement)("h3",null,"Selected video"),Object(x.createElement)("figure",{className:"content__image-wrapper"},Object(x.createElement)("div",{className:"content__placement"},Object(x.createElement)("img",{src:this.state.videoData.thumbnail_240_url,alt:this.state.videoData.title?this.state.videoData.title:this.state.videoData.name,className:"content__thumbnail"}))),Object(x.createElement)("span",{className:"content__title",title:this.state.videoData.title?this.state.videoData.title:this.state.videoData.name},this.state.videoData.title?this.state.videoData.title:this.state.videoData.name)):Object(x.createElement)("p",null,"No video selected.")}},{key:"render",value:function(){return Object(x.createElement)(k.PanelBody,null,this.showImage)}}]),u}(x.Component);function C(){return document.body.classList.contains("block-editor-page")?"gutenberg":"classic-editor"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var r=n(3),a=n.n(r),o=n(8),s=n.n(o),i=n(9),c=n.n(i),u=n(2),l=n.n(u),d=n(12),p=n.n(d),f=n(13),h=n.n(f),m=n(7),v=n.n(m),b=n(6),y=n.n(b),g=n(11),_=n.n(g),x=n(0),w=n(1),O=n.n(w),k=n(5),j=n(4),E=n(15),P=n(10);function S(t){var e=t.contentData,n=t.currentPage,r=t.callback;return 0===Object.entries(e).length||0===e.total||!1===e.has_more&&1===e.page?Object(x.createElement)(x.Fragment,null):1===e.page&&!0===e.has_more?Object(x.createElement)(x.Fragment,null,Object(x.createElement)("button",{type:"button",className:"components-button button action dm__next-button",onClick:function(){return r(n+1)}},Object(k.__)("Next","textdomain"))):!1===e.has_more&&1!==e.page?Object(x.createElement)(x.Fragment,null,Object(x.createElement)("button",{type:"button",className:"components-button button action dm__prev-button",onClick:function(){return r(n-1)}},Object(k.__)("Previous","textdomain"))):Object(x.createElement)(x.Fragment,null,Object(x.createElement)("button",{type:"button",className:"components-button button action dm__prev-button",onClick:function(){return r(n-1)}},Object(k.__)("Previous","textdomain")),Object(x.createElement)("button",{type:"button",className:"components-button button action dm__next-button",onClick:function(){return r(n+1)}},Object(k.__)("Next","textdomain")))}var D=n(14);var N=new WeakMap,C=new WeakMap,M=new WeakSet,V=function(t){p()(f,t);var e,n,r,o,i,u,d=(i=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v()(i);if(u){var n=v()(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h()(this,t)});function f(t){var e;return s()(this,f),e=d.call(this,t),M.add(l()(e)),N.set(l()(e),{writable:!0,value:null}),C.set(l()(e),{writable:!0,value:""}),e.state={videos:{},currentPage:1,loadingData:!0},_()(l()(e),C,function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(l()(e),M,R).call(l()(e))),e.setVideos=e.setVideos.bind(l()(e)),e.loadPage=e.loadPage.bind(l()(e)),e.setLoadingData=e.setLoadingData.bind(l()(e)),e}return c()(f,[{key:"fetchVideo",value:(o=a()(O.a.mark((function t(){var e,n,r,o,s,i,c,u=this,l=arguments;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:1,n=l.length>1?l[1]:void 0,this.setLoadingData(!0),t.next=5,Object(P.a)("/dm/v1/userinfo");case 5:return r=t.sent,t.next=8,Object(P.a)("/dm/v1/get-custom-options/content");case 8:return o=t.sent,s={fields:"id,title,thumbnail_240_url,status,private,private_id",limit:10,flags:"no_live,exportable,verified",page:e},n?(s.sort="relevance",s.search=n):s.sort="recent",i="",c=void 0!==o.owners,y()(this,N)&&!0!==this.props.globalVideo&&!c?i="user/"+r+"/videos":c&&!0!==this.props.globalVideo?(s.owners=o.owners,i="videos"):i="videos",t.abrupt("return",new Promise(function(){var t=a()(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:DM.api(i,s,(function(t){u.setLoadingData(!1),e(t)}));case 1:case"end":return t.stop()}}),t)})));return function(_x){return t.apply(this,arguments)}}()).catch((function(t){console.log(t)})));case 15:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"setVideos",value:function(t){this.setState({videos:t})}},{key:"setCurrentPage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setState({currentPage:t})}},{key:"setLoadingData",value:function(t){this.setState({loadingData:t})}},{key:"addToPost",value:function(t){if("gutenberg"===y()(this,C)){Object(j.dispatch)("core/editor").editPost({meta:{_dm_video_data:JSON.stringify(t)}});var e=new CustomEvent("dm-video-updated");document.dispatchEvent(e)}else{document.getElementById("dm_video_data").setAttribute("value",JSON.stringify(t));var n=new CustomEvent("dm-video-updated",{detail:{videoData:t}});document.dispatchEvent(n)}}},{key:"componentDidMount",value:(r=a()(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _()(this,N,Object(j.select)(D.a).getConnectionStatus().connectionStatus),t.next=3,this.fetchVideo();case 3:e=t.sent,this.setVideos(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(n=a()(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.keywords===e.keywords&&this.props.globalVideo===e.globalVideo){t.next=6;break}return t.next=3,this.fetchVideo(1,this.props.keywords);case 3:n=t.sent,this.setCurrentPage(),this.setVideos(n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"loadPage",value:(e=a()(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchVideo(e,this.props.keywords);case 2:n=t.sent,this.setCurrentPage(e),this.setVideos(n);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"renderVideoList",value:function(){var t=this,e=[];return void 0!==this.state.videos.error?Object(x.createElement)("li",{className:"dm__show-message"},"API errors, please check your settings…"):void 0!==this.state.videos&&Object.entries(this.state.videos).length>0&&this.state.videos.list.length>0?(function(){for(var n=t.state.videos.list,r=function(r){e.push(Object(x.createElement)("li",{key:n[r],className:"content__item ".concat(n[r].private?"private":""," ").concat("ready"===n[r].status?"draft":"")},Object(x.createElement)("button",{onClick:function(){return t.addToPost(n[r])},type:"button"},Object(x.createElement)("figure",{className:"content__image-wrapper"},Object(x.createElement)("div",{className:"content__placement"},Object(x.createElement)("img",{src:n[r].thumbnail_240_url,alt:n[r].title,className:"content__thumbnail"}))),Object(x.createElement)("span",{className:"content__title",title:n[r].title},n[r].title))))},a=0;a<n.length;a++)r(a)}(),e):Object(x.createElement)("li",null,"No video found…")}},{key:"render",value:function(){return Object(x.createElement)(x.Fragment,null,Object(x.createElement)("ul",{className:"dm__search-results"},this.state.loadingData?Object(x.createElement)("li",null,Object(k.__)("loading video…","textdomain")):this.renderVideoList()),Object(x.createElement)(S,{currentPage:this.state.currentPage,callback:this.loadPage,contentData:this.state.videos}))}}]),f}(x.Component);function R(){return document.body.classList.contains("block-editor-page")?"gutenberg":"classic-editor"}var T=new WeakMap,F=function(t){p()(f,t);var e,n,r,o,i,u,d=(i=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v()(i);if(u){var n=v()(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h()(this,t)});function f(t){var e;return s()(this,f),e=d.call(this,t),T.set(l()(e),{writable:!0,value:null}),e.state={playlists:{},currentPage:1,loadingData:!0},e.setPlaylist=e.setPlaylist.bind(l()(e)),e.loadPage=e.loadPage.bind(l()(e)),e.setLoadingData=e.setLoadingData.bind(l()(e)),e}return c()(f,[{key:"addToPost",value:function(t){Object(j.dispatch)("core/editor").editPost({meta:{_dm_video_data:JSON.stringify(t)}});var e=new CustomEvent("dm-video-updated");document.dispatchEvent(e)}},{key:"fetchPlaylist",value:(o=a()(O.a.mark((function t(){var e,n,r,a,o,s,i,c=this,u=arguments;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:1,n=u.length>1?u[1]:void 0,this.setLoadingData(!0),t.next=5,Object(P.a)("/dm/v1/userinfo");case 5:return r=t.sent,t.next=8,Object(P.a)("/dm/v1/get-custom-options/content");case 8:return a=t.sent,o="/playlists",s={limit:10,fields:"id,name,thumbnail_240_url,private",page:e,sort:"recent",flags:"verified"},n&&(s.search=n,s.sort="relevance"),y()(this,T)&&!0!==this.props.globalVideo?s.owner=r:y()(this,T)||!1===a||(i=a.owners.split(","),s.owner=i[0]),t.abrupt("return",new Promise((function(t){DM.api(o,s,(function(e){c.setLoadingData(!1),t(e)}))})).catch((function(t){console.log(t)})));case 14:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"loadPage",value:(r=a()(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchPlaylist(e,this.props.keywords);case 2:n=t.sent,this.setCurrentPage(e),this.setPlaylist(n);case 5:case"end":return t.stop()}}),t,this)}))),function(_x){return r.apply(this,arguments)})},{key:"componentDidMount",value:(n=a()(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _()(this,T,Object(j.select)(D.a).getConnectionStatus().connectionStatus),t.next=3,this.fetchPlaylist();case 3:e=t.sent,this.setCurrentPage(),this.setPlaylist(e);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=a()(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.keywords===e.keywords&&this.props.globalVideo===e.globalVideo){t.next=6;break}return t.next=3,this.fetchPlaylist(1,this.props.keywords);case 3:n=t.sent,this.setCurrentPage(1),this.setPlaylist(n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"setLoadingData",value:function(t){this.setState({loadingData:t})}},{key:"setPlaylist",value:function(t){this.setState({playlists:t})}},{key:"setCurrentPage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setState({currentPage:t})}},{key:"renderPlaylists",value:function(){var t=this,e=[];return void 0!==this.state.playlists.error?Object(x.createElement)("li",{className:"dm__show-message"},"API errors, to search playlist you must login first…"):void 0!==this.state.playlists&&Object.entries(this.state.playlists).length>0&&this.state.playlists.list.length>0?(function(){for(var n=t.state.playlists.list,r=function(r){e.push(Object(x.createElement)("li",{key:n[r],className:"content__item"},Object(x.createElement)("button",{onClick:function(){return t.addToPost(n[r])}},Object(x.createElement)("figure",{className:"content__image-wrapper"},Object(x.createElement)("div",{className:"content__placement"},Object(x.createElement)("img",{src:n[r].thumbnail_240_url,alt:n[r].name,className:"content__thumbnail"}))),Object(x.createElement)("span",{className:"content__title"},n[r].name))))},a=0;a<n.length;a++)r(a)}(),e):Object(x.createElement)("li",null,"No playlist found…")}},{key:"render",value:function(){return Object(x.createElement)(x.Fragment,null,Object(x.createElement)("ul",{className:"dm__search-results"},this.state.loadingData?Object(x.createElement)("li",null,Object(k.__)("loading playlist…","textdomain")):this.renderPlaylists()),Object(x.createElement)(S,{currentPage:this.state.currentPage,callback:this.loadPage,contentData:this.state.playlists}))}}]),f}(x.Component);var L=new WeakMap,I=function(t){p()(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v()(r);if(o){var n=v()(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h()(this,t)});function u(t){var e;return s()(this,u),e=i.call(this,t),L.set(l()(e),{writable:!0,value:null}),e.state={playlists:{},keywords:"",currentPage:1,findGlobal:!1,findPlaylist:!1},e.findVideo=e.findVideo.bind(l()(e)),e.setKeywords=e.setKeywords.bind(l()(e)),e.setGlobalVideo=e.setGlobalVideo.bind(l()(e)),e.setFindPlaylist=e.setFindPlaylist.bind(l()(e)),e}return c()(u,[{key:"setConnectionStatus",value:(n=a()(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e?Object(x.createElement)(x.Fragment,null,Object(x.createElement)("span",{className:"dm--connected"})," ",Object(k.__)("You're connected","textdomain")):Object(x.createElement)(x.Fragment,null,Object(x.createElement)("span",{className:"dm--disconnected"})," ",Object(k.__)("You're not connected","textdomain")),this.setState({connectionStatus:n});case 2:case"end":return t.stop()}}),t,this)}))),function(_x){return n.apply(this,arguments)})},{key:"componentDidMount",value:function(){_()(this,L,Object(j.select)(D.a).getConnectionStatus().connectionStatus),this.setConnectionStatus(y()(this,L))}},{key:"findVideo",value:(e=a()(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"setKeywords",value:function(t){this.setState({keywords:t.target.value})}},{key:"setGlobalVideo",value:function(t){this.setState({findGlobal:!0===t.target.checked})}},{key:"setFindPlaylist",value:function(t){this.setState({findPlaylist:!0===t.target.checked})}},{key:"render",value:function(){return Object(x.createElement)(E.PanelBody,null,Object(x.createElement)("div",{className:"dm__content-list"},Object(x.createElement)("p",null,this.state.connectionStatus),Object(x.createElement)("form",{onSubmit:this.findVideo},Object(x.createElement)("label",{htmlFor:"keywords"},Object(k.__)("Find a video","textdomain")),Object(x.createElement)("input",{id:"keywords",onChange:this.setKeywords,type:"text",name:"keywords",className:"dm__keywords-input"}),Object(x.createElement)("button",{type:"submit",className:"action button"},"Find"),Object(x.createElement)("label",{htmlFor:"global-video",className:"checkbox-label"},Object(x.createElement)("input",{type:"checkbox",id:"global-video",onChange:this.setGlobalVideo,name:"globalVideo",value:"1"})," ",Object(k.__)("Find global","textdomain")),Object(x.createElement)("label",{htmlFor:"find-playlist",className:"checkbox-label"},Object(x.createElement)("input",{type:"checkbox",id:"find-playlist",onChange:this.setFindPlaylist,name:"findPlaylist",value:"1"})," ",Object(k.__)("Find playlist","textdomain"))),this.state.findPlaylist?Object(x.createElement)(F,{keywords:this.state.keywords,globalVideo:this.state.findGlobal}):Object(x.createElement)(V,{keywords:this.state.keywords,globalVideo:this.state.findGlobal})))}}]),u}(x.Component)},function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(3),a=n.n(r),o=n(8),s=n.n(o),i=n(9),c=n.n(i),u=n(1),l=n.n(u);function d(){return p.apply(this,arguments)}function p(){return(p=a()(l.a.mark((function t(){var e,n,r,a,o=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:function(){return Boolean},n=o.length>1&&void 0!==o[1]?o[1]:50,r=o.length>2&&void 0!==o[2]?o[2]:1/0,a=o.length>3&&void 0!==o[3]?o[3]:"",t.abrupt("return",new Promise((function(t,o){var s=0,i=setInterval((function(){var c=e(),u=s>r||c;s+=n,c?(t(""),clearInterval(i)):u&&(o(new Error("waitFor(): "+a)),clearInterval(i))}),n)})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f=n(10),h=n(14),m=n(4);function v(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var b=new WeakSet,y=new WeakSet,g=new WeakSet,_=new WeakSet,x=new WeakSet,w=function(){function t(){s()(this,t),x.add(this),_.add(this),g.add(this),y.add(this),b.add(this),this.setupDm()}var e;return c()(t,[{key:"setupDm",value:(e=a()(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d((function(){return"undefined"!=typeof DM}),100,3e4,"Timeout waiting for DM loaded, please refresh and make sure your internet is active");case 2:return v(this,b,O).call(this),t.next=5,v(this,y,k).call(this);case 5:return v(this,g,E).call(this),t.next=8,v(this,x,S).call(this);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}();function O(){DM._oauth.tokenUrl="https://api.dailymotion.com/oauth/token",DM.Auth.isSessionExpired=function(t,e){return void 0===t&&(t=DM._session),!t||!(t&&"expires_in"in t&&(new Date).getTime()<1e3*parseInt(t.expires_in,10))&&(delete t.expires_in,!0)}}function k(){return j.apply(this,arguments)}function j(){return(j=a()(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.a)("/dm/v1/get-api-key");case 2:e=t.sent,DM.init({apiKey:e.api_key,apiSecret:e.api_secret,status:!0,cookie:!0});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){DM.Event.subscribe("auth.sessionChange",(function(t){if("connected"===(null==t?void 0:t.status)){var e=t.session;"expires_in"in t.session||(e.expires_in=e.expires),e.expires=e.expires+2419200,DM.Cookie.set(e)}}))}function P(){return new Promise((function(t){DM.getLoginStatus((function(e){e.session?t(!0):t(!1)}))}))}function S(){return D.apply(this,arguments)}function D(){return(D=a()(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(this,_,P).call(this);case 2:e=t.sent,Object(m.dispatch)(h.a).setConnectionStatus({connectionStatus:e}),n=new CustomEvent("dm-sdk-ready"),document.dispatchEvent(n);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}},,function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){return e.get?e.get.call(t):e.value},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();t.exports=e=r.fetch,r.fetch&&(e.default=r.fetch.bind(r)),e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response},,,,,function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(19),o=n(18),s=n(20);document.addEventListener("dm-sdk-ready",(function(){Object(r.render)(Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.a,null),Object(r.createElement)("hr",null),Object(r.createElement)(a.a,null)),document.getElementById("dm-search-classic"))})),new s.a}]);